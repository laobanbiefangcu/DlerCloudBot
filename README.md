# ğŸŒŸ å¢™æ´API Telegram Bot éƒ¨ç½²è„šæœ¬

<div align="center">

![Version](https://img.shields.io/badge/ç‰ˆæœ¬-v1.0.5-blue.svg?style=for-the-badge)
![License](https://img.shields.io/badge/è®¸å¯è¯-MIT-green.svg?style=for-the-badge)
![Status](https://img.shields.io/badge/çŠ¶æ€-ç¨³å®šç‰ˆ-success.svg?style=for-the-badge)

**ğŸš€ ä¸€é”®éƒ¨ç½² | ğŸ›¡ï¸ å®‰å…¨å¯é  | ğŸ’ åŠŸèƒ½å®Œæ•´ | ğŸ”§ æ˜“äºç®¡ç†**

---

### âœ¨ ä¸–ç•Œä¸Šæœ€ä¼˜é›…çš„å¢™æ´ç®¡ç†æœºå™¨äººéƒ¨ç½²è§£å†³æ–¹æ¡ˆ âœ¨

</div>

## ğŸ¯ é¡¹ç›®æ¦‚è§ˆ

è¿™æ˜¯ä¸€ä¸ª**åŠŸèƒ½å¼ºå¤§ã€è®¾è®¡ç²¾ç¾**çš„å¢™æ´API Telegramæœºå™¨äººä¸€é”®éƒ¨ç½²è„šæœ¬ï¼Œè®©æ‚¨èƒ½å¤Ÿï¼š

- ğŸª **é›¶é…ç½®éƒ¨ç½²** - ä¸€æ¡å‘½ä»¤ï¼Œæå®šä¸€åˆ‡
- ğŸ­ **å¤šè´¦å·ç®¡ç†** - æ”¯æŒæ— é™è´¦å·åˆ‡æ¢
- ğŸ¨ **æ™ºèƒ½ç»´æŠ¤** - è‡ªåŠ¨Tokenåˆ·æ–°ï¼Œæ°¸ä¸æ‰çº¿
- ğŸª **å¯è§†åŒ–ç®¡ç†** - ç¾è§‚çš„äº¤äº’ç•Œé¢
- ğŸ¯ **ä¸“ä¸šçº§ç›‘æ§** - PM2è¿›ç¨‹ç®¡ç†ï¼Œç¨³å¦‚ç£çŸ³

---

## ğŸŒˆ æ ¸å¿ƒç‰¹æ€§

### ğŸ”¥ **è‡ªåŠ¨åŒ–éƒ¨ç½²**
```bash
# ä¸€é”®éƒ¨ç½²ï¼Œä»é›¶åˆ°å®Œæˆ
bash dler.sh
```

<details>
<summary>ğŸª <strong>ç‚¹å‡»å±•å¼€ - å®Œæ•´åŠŸèƒ½åˆ—è¡¨</strong></summary>

### ğŸ’ **è´¦å·ç®¡ç†**
- ğŸ” **å¤šè´¦å·æ”¯æŒ** - æ— é™è´¦å·ï¼Œä¸€é”®åˆ‡æ¢
- ğŸ›¡ï¸ **å¯†ç åŠ å¯†** - AES-256-CBCå†›ç”¨çº§åŠ å¯†
- ğŸ”„ **è‡ªåŠ¨ç™»å½•** - Tokenè¿‡æœŸè‡ªåŠ¨é‡æ–°ç™»å½•
- ğŸ“± **ä¼šè¯æŒä¹…åŒ–** - é‡å¯åæ•°æ®ä¸ä¸¢å¤±

### âš¡ **æ™ºèƒ½ç»´æŠ¤** 
- ğŸ• **å®šæ—¶åˆ·æ–°** - æ¯45åˆ†é’Ÿè‡ªåŠ¨åˆ·æ–°Token
- ğŸ” **å¥åº·æ£€æŸ¥** - å®æ—¶ç›‘æ§TokençŠ¶æ€
- ğŸš¨ **æ•…éšœæ¢å¤** - è‡ªåŠ¨å¤„ç†ç½‘ç»œå¼‚å¸¸
- ğŸ“Š **æ•°æ®ç»Ÿè®¡** - è¯¦ç»†ä½¿ç”¨è®°å½•

### ğŸ¨ **ç”¨æˆ·ä½“éªŒ**
- ğŸŒŸ **ç¾è§‚ç•Œé¢** - ç²¾å¿ƒè®¾è®¡çš„äº¤äº’ä½“éªŒ
- ğŸ“‹ **å¿«æ·å‘½ä»¤** - ä¸°å¯Œçš„ç®¡ç†æŒ‡ä»¤
- ğŸ”” **æ™ºèƒ½æé†’** - é‡è¦äº‹ä»¶åŠæ—¶é€šçŸ¥
- ğŸ¯ **ç²¾å‡†æ“ä½œ** - é˜²è¯¯æ“ä½œä¿æŠ¤æœºåˆ¶

### ğŸ› ï¸ **æŠ€æœ¯äº®ç‚¹**
- ğŸš€ **PM2ç®¡ç†** - ä¸“ä¸šçº§è¿›ç¨‹ç®¡ç†
- ğŸ³ **å®¹å™¨æ”¯æŒ** - Dockerå‹å¥½è®¾è®¡
- ğŸ”§ **SystemDé›†æˆ** - ç³»ç»Ÿçº§æœåŠ¡æ”¯æŒ
- ğŸ“¦ **ä¾èµ–è‡ªåŠ¨** - æ™ºèƒ½å®‰è£…æ‰€éœ€ç»„ä»¶

</details>

---

## ğŸª å¿«é€Ÿå¼€å§‹

### ğŸš€ **è¶…çº§ç®€å•çš„ä¸€é”®éƒ¨ç½²**

```bash
# ä¸‹è½½å¹¶è¿è¡Œéƒ¨ç½²è„šæœ¬
wget -O dler.sh https://your-domain.com/dler.sh
chmod +x dler.sh
bash dler.sh
```

### ğŸ­ **æˆ–è€…ä½¿ç”¨åœ¨çº¿éƒ¨ç½²**

```bash
# ç›´æ¥åœ¨çº¿è¿è¡Œï¼ˆæ¨èï¼‰
curl -fsSL https://your-domain.com/dler.sh | bash
```

---

## ğŸ¨ ä½¿ç”¨æŒ‡å—

### ğŸ“± **æœºå™¨äººå‘½ä»¤å¤§å…¨**

<table>
<tr>
<td width="50%">

#### ğŸ” **è´¦å·ç®¡ç†**
```
/login          ğŸ“ ç™»å½•æ–°è´¦å·
/logout         ğŸšª æ³¨é”€å½“å‰è´¦å·
/accounts       ğŸ“‹ æŸ¥çœ‹æ‰€æœ‰è´¦å·
/switch <ID>    ğŸ”„ åˆ‡æ¢è´¦å·
/remove <ID>    ğŸ—‘ï¸åˆ é™¤æŒ‡å®šè´¦å·
```

</td>
<td width="50%">

#### ğŸ› ï¸ **ç³»ç»Ÿç®¡ç†**
```
/status         ğŸ“Š ç³»ç»ŸçŠ¶æ€æ£€æŸ¥
/info           â„¹ï¸ è´¦æˆ·è¯¦ç»†ä¿¡æ¯
/creds          ğŸ”‘ å‡­æ®ç®¡ç†
/ping           ğŸ“ ç½‘ç»œå»¶è¿Ÿæµ‹è¯•
/help           ğŸ“š å¸®åŠ©æ–‡æ¡£
```

</td>
</tr>
</table>

### ğŸ¯ **æœåŠ¡å™¨ç®¡ç†å‘½ä»¤**

<table>
<tr>
<td width="33%">

#### ğŸš€ **å¯åŠ¨æœåŠ¡**
```bash
# PM2å¯åŠ¨ï¼ˆæ¨èï¼‰
pm2 start ecosystem.config.js

# ç›´æ¥å¯åŠ¨
./start.sh

# å¿«é€Ÿå¯åŠ¨
./quick-start.sh
```

</td>
<td width="33%">

#### ğŸ“Š **ç›‘æ§ç®¡ç†**
```bash
# æŸ¥çœ‹çŠ¶æ€
pm2 status

# æŸ¥çœ‹æ—¥å¿—
pm2 logs dler-bot

# é‡å¯æœåŠ¡
pm2 restart dler-bot
```

</td>
<td width="33%">

#### ğŸ›‘ **åœæ­¢æœåŠ¡**
```bash
# åœæ­¢æœåŠ¡
./stop.sh

# PM2åœæ­¢
pm2 stop dler-bot

# å®Œå…¨å¸è½½
./uninstall.sh
```

</td>
</tr>
</table>

---

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### ğŸ“ **é¡¹ç›®ç»“æ„**

```
dler-cloud-bot/
â”œâ”€â”€ ğŸ¤– bot.js                  # ä¸»ç¨‹åºæ–‡ä»¶
â”œâ”€â”€ ğŸ“¦ package.json            # ä¾èµ–é…ç½®
â”œâ”€â”€ âš™ï¸ ecosystem.config.js     # PM2é…ç½®
â”œâ”€â”€ ğŸ” .env                    # ç¯å¢ƒå˜é‡
â”œâ”€â”€ ğŸ“‹ logs/                   # æ—¥å¿—ç›®å½•
â”‚   â”œâ”€â”€ ğŸ“„ out.log            # è¾“å‡ºæ—¥å¿—
â”‚   â”œâ”€â”€ âŒ err.log            # é”™è¯¯æ—¥å¿—
â”‚   â””â”€â”€ ğŸ“Š combined.log       # åˆå¹¶æ—¥å¿—
â”œâ”€â”€ ğŸš€ start.sh               # å¯åŠ¨è„šæœ¬
â”œâ”€â”€ âš¡ quick-start.sh         # å¿«é€Ÿå¯åŠ¨
â”œâ”€â”€ ğŸ›‘ stop.sh                # åœæ­¢è„šæœ¬
â”œâ”€â”€ ğŸ“Š status.sh              # çŠ¶æ€æŸ¥çœ‹
â””â”€â”€ ğŸ—‘ï¸ uninstall.sh           # å¸è½½è„šæœ¬
```

### ğŸ”§ **æŠ€æœ¯æ ˆ**

<div align="center">

| ç»„ä»¶ | æŠ€æœ¯ | æè¿° |
|------|------|------|
| ğŸš€ **è¿è¡Œæ—¶** | Node.js 18+ | é«˜æ€§èƒ½JavaScriptè¿è¡Œç¯å¢ƒ |
| ğŸ“± **æœºå™¨äººæ¡†æ¶** | node-telegram-bot-api | ä¸“ä¸šTelegram Bot SDK |
| ğŸ”’ **åŠ å¯†ç®—æ³•** | AES-256-CBC | å†›ç”¨çº§æ•°æ®åŠ å¯† |
| ğŸ› ï¸ **è¿›ç¨‹ç®¡ç†** | PM2 | ä¼ä¸šçº§è¿›ç¨‹ç®¡ç†å™¨ |
| ğŸŒ **ç½‘ç»œè¯·æ±‚** | node-fetch | ç°ä»£åŒ–HTTPå®¢æˆ·ç«¯ |
| ğŸ“Š **æ—¥å¿—ç³»ç»Ÿ** | Winston | ä¸“ä¸šæ—¥å¿—ç®¡ç† |

</div>

---

## âš™ï¸ é…ç½®æŒ‡å—

### ğŸ” **ç¯å¢ƒå˜é‡é…ç½®**

åˆ›å»º `.env` æ–‡ä»¶ï¼š

```bash
# æœºå™¨äººåŸºç¡€é…ç½®
BOT_TOKEN=your_telegram_bot_token_here
ADMIN_ID=your_telegram_user_id_here

# APIé…ç½®
API_BASE_URL=https://dler.cloud/api/v1
DEBUG=false

# å®‰å…¨é…ç½®
ENCRYPTION_KEY=your_32_character_encryption_key_here

# é«˜çº§é…ç½®
TOKEN_REFRESH_INTERVAL=45  # Tokenåˆ·æ–°é—´éš”ï¼ˆåˆ†é’Ÿï¼‰
MAX_RETRY_ATTEMPTS=3       # æœ€å¤§é‡è¯•æ¬¡æ•°
REQUEST_TIMEOUT=30000      # è¯·æ±‚è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
```

### ğŸ¨ **è‡ªå®šä¹‰é…ç½®**

<details>
<summary>ğŸ”§ <strong>é«˜çº§é…ç½®é€‰é¡¹</strong></summary>

```javascript
// ecosystem.config.js - PM2é…ç½®
module.exports = {
  apps: [{
    name: 'dler-bot',
    script: 'bot.js',
    instances: 1,
    autorestart: true,
    watch: false,
    max_memory_restart: '200M',
    env: {
      NODE_ENV: 'production'
    },
    // ğŸ¯ æ—¥å¿—é…ç½®
    log_file: './logs/combined.log',
    out_file: './logs/out.log',
    error_file: './logs/err.log',
    log_date_format: 'YYYY-MM-DD HH:mm:ss',
    
    // ğŸš€ æ€§èƒ½ä¼˜åŒ–
    node_args: '--max-old-space-size=256',
    
    // ğŸ”„ é‡å¯ç­–ç•¥
    min_uptime: '10s',
    max_restarts: 10
  }]
}
```

</details>

---

## ğŸ›¡ï¸ å®‰å…¨ç‰¹æ€§

### ğŸ” **æ•°æ®ä¿æŠ¤**

<table>
<tr>
<td width="50%">

#### ğŸ’ **åŠ å¯†å­˜å‚¨**
- ğŸ›¡ï¸ AES-256-CBCåŠ å¯†ç®—æ³•
- ğŸ”‘ éšæœºç”Ÿæˆçš„åŠ å¯†å¯†é’¥  
- ğŸ”’ å¯†ç æ°¸ä¸æ˜æ–‡å­˜å‚¨
- ğŸš« é˜²æ­¢æ•°æ®æ³„éœ²é£é™©

</td>
<td width="50%">

#### ğŸ› ï¸ **å®‰å…¨æœºåˆ¶**
- ğŸš¨ ç®¡ç†å‘˜æƒé™éªŒè¯
- ğŸ” è¾“å…¥æ•°æ®åˆè§„æ£€æŸ¥
- â° Tokenè¿‡æœŸè‡ªåŠ¨å¤„ç†
- ğŸš¦ è¯·æ±‚é¢‘ç‡é™åˆ¶ä¿æŠ¤

</td>
</tr>
</table>

### ğŸ”§ **æƒé™æ§åˆ¶**

```javascript
// ç®¡ç†å‘˜éªŒè¯æœºåˆ¶
const isAdmin = (userId) => {
    return userId === parseInt(process.env.ADMIN_ID);
};

// ç”¨æˆ·æƒé™æ£€æŸ¥
const hasPermission = (chatId, operation) => {
    return isAdmin(chatId) || userHasAccess(chatId, operation);
};
```

---

## ğŸ“Š ç›‘æ§è¿ç»´

### ğŸ¯ **å®æ—¶ç›‘æ§**

```bash
# ğŸ” æŸ¥çœ‹å®æ—¶æ—¥å¿—
pm2 logs dler-bot --lines 100

# ğŸ“Š æ€§èƒ½ç›‘æ§
pm2 monit

# ğŸ“ˆ è¿›ç¨‹çŠ¶æ€
pm2 status

# ğŸ”„ é‡å¯æœåŠ¡
pm2 restart dler-bot

# ğŸ›‘ åœæ­¢æœåŠ¡
pm2 stop dler-bot
```

### ğŸ“ˆ **æ€§èƒ½ä¼˜åŒ–**

<details>
<summary>ğŸš€ <strong>æ€§èƒ½è°ƒä¼˜å»ºè®®</strong></summary>

#### ğŸª **å†…å­˜ä¼˜åŒ–**
```bash
# è®¾ç½®å†…å­˜é™åˆ¶
pm2 start bot.js --max-memory-restart 200M

# ä¼˜åŒ–Node.jså†…å­˜
node --max-old-space-size=256 bot.js
```

#### âš¡ **å¹¶å‘ä¼˜åŒ–**
```bash
# é›†ç¾¤æ¨¡å¼è¿è¡Œ
pm2 start ecosystem.config.js -i max

# è´Ÿè½½å‡è¡¡é…ç½®
pm2 start bot.js -i 4
```

#### ğŸ”§ **ç³»ç»Ÿè°ƒä¼˜**
```bash
# å¢åŠ æ–‡ä»¶æè¿°ç¬¦é™åˆ¶
echo "* soft nofile 65536" >> /etc/security/limits.conf
echo "* hard nofile 65536" >> /etc/security/limits.conf

# ä¼˜åŒ–TCPå‚æ•°
echo "net.core.somaxconn = 65536" >> /etc/sysctl.conf
sysctl -p
```

</details>

---

## ğŸ†˜ æ•…éšœæ’é™¤

### ğŸš¨ **å¸¸è§é—®é¢˜**

<details>
<summary>â“ <strong>æœºå™¨äººæ— æ³•å¯åŠ¨</strong></summary>

```bash
# 1. æ£€æŸ¥Tokené…ç½®
echo $BOT_TOKEN

# 2. éªŒè¯ç½‘ç»œè¿æ¥
curl -s https://api.telegram.org/bot$BOT_TOKEN/getMe

# 3. æŸ¥çœ‹é”™è¯¯æ—¥å¿—
tail -f logs/err.log

# 4. é‡æ–°å®‰è£…ä¾èµ–
npm install --production
```

</details>

<details>
<summary>ğŸ”§ <strong>Tokenè‡ªåŠ¨åˆ·æ–°å¤±è´¥</strong></summary>

```bash
# 1. æ£€æŸ¥å‡­æ®æ–‡ä»¶
ls -la credentials.json

# 2. éªŒè¯åŠ å¯†å¯†é’¥
echo $ENCRYPTION_KEY | wc -c  # åº”è¯¥æ˜¯32å­—ç¬¦

# 3. æµ‹è¯•APIè¿æ¥
curl -X POST https://dler.cloud/api/v1/login \
     -H "Content-Type: application/json" \
     -d '{"email":"test","passwd":"test"}'

# 4. é‡ç½®ç”¨æˆ·æ•°æ®
rm -f tokens.json sessions.json credentials.json
```

</details>

<details>
<summary>ğŸ“Š <strong>PM2æœåŠ¡å¼‚å¸¸</strong></summary>

```bash
# 1. é‡ç½®PM2è¿›ç¨‹
pm2 kill
pm2 start ecosystem.config.js

# 2. æ¸…ç†æ—¥å¿—æ–‡ä»¶
pm2 flush

# 3. æ›´æ–°PM2ç‰ˆæœ¬
npm install -g pm2@latest

# 4. æ£€æŸ¥ç³»ç»Ÿèµ„æº
free -h
df -h
```

</details>

---

## ğŸ¯ éƒ¨ç½²æ¨¡å¼

### ğŸš€ **ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²**

```bash
# ğŸ­ ç”Ÿäº§ç¯å¢ƒä¸€é”®éƒ¨ç½²
bash dler.sh --production

# ğŸ³ Dockerå®¹å™¨éƒ¨ç½²
docker run -d --name dler-bot \
  -e BOT_TOKEN=your_token \
  -e ADMIN_ID=your_id \
  -v $(pwd)/data:/app/data \
  dler-bot:latest

# â˜ï¸ äº‘æœåŠ¡å™¨éƒ¨ç½²
curl -fsSL https://install.dler-bot.com | bash
```

### ğŸ§ª **å¼€å‘ç¯å¢ƒéƒ¨ç½²**

```bash
# ğŸ”§ å¼€å‘æ¨¡å¼å¯åŠ¨
npm run dev

# ğŸ› è°ƒè¯•æ¨¡å¼
DEBUG=true npm start

# ğŸ§ª æµ‹è¯•ç¯å¢ƒ
NODE_ENV=test npm test
```

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

### ğŸ’¡ **å¦‚ä½•è´¡çŒ®**

1. ğŸ´ **Fork** é¡¹ç›®åˆ°æ‚¨çš„è´¦æˆ·
2. ğŸŒ¿ **åˆ›å»º** æ‚¨çš„ç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. ğŸ’¾ **æäº¤** æ‚¨çš„æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. ğŸ“¤ **æ¨é€** åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. ğŸ¯ **å¼€å¯** Pull Request

### ğŸ› **Bug æŠ¥å‘Š**

å‘ç°é—®é¢˜ï¼Ÿè¯·åœ¨ [Issues](https://github.com/your-repo/issues) é¡µé¢æäº¤ï¼š

- ğŸ“ è¯¦ç»†æè¿°é—®é¢˜
- ğŸ”„ æä¾›å¤ç°æ­¥éª¤
- ğŸ–¥ï¸ è¯´æ˜è¿è¡Œç¯å¢ƒ
- ğŸ“¸ é™„ä¸Šé”™è¯¯æˆªå›¾

---

## ğŸ“œ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ **MIT è®¸å¯è¯** - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…

---

## ğŸŒŸ è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰ä¸ºè¿™ä¸ªé¡¹ç›®åšå‡ºè´¡çŒ®çš„å¼€å‘è€…ä»¬ï¼

<div align="center">

### ğŸ‰ **å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç»™æˆ‘ä»¬ä¸€ä¸ª â­ Starï¼** ğŸ‰

---

**ğŸš€ Made with â¤ï¸ by Dler Bot Team**

**ğŸ“§ è”ç³»æˆ‘ä»¬ï¼šsupport@dler-bot.com**

**ğŸŒ å®˜æ–¹ç½‘ç«™ï¼šhttps://dler-bot.com**

</div>